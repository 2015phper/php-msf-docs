# 3.2 运行代码

这里以运行示例项目代码为例

## 克隆

```bash
$>git clone git@github.com:pinguo/php-msf.git php-msf
$>cd php-msf
$>git checkout demo
```

## 运行

### build.sh(docker环境需要)

```bash
$>cd php-msf
$>./build.sh
```

### composer

```bash
$>cd /home/worker/data/www/php-msf
$>composer install -vvv
```

### supervisor

```bash
$>supervisorctl
supervisor> update
php-msf: added process group
supervisor> status
msf:php-msf            RUNNING   pid 26958, uptime 0:00:31
//...
```

### 查看服务日志

cat ~/data/msf-php-msf/server.php

```bash
      _______                               ____
________  / /_  ____        ____ ___  _____/ __/
___/ __ \/ __ \/ __ \______/ __ `__ \/ ___/ /_
__/ /_/ / / / / /_/ /_____/ / / / / (__  ) __/
_/ .___/_/ /_/ .___/     /_/ /_/ /_/____/_/
/_/         /_/         Camera360 Open Source TM
[2017-08-30 11:19:54] MSF     Version: 3.0.0
[2017-08-30 11:19:54] Swoole  Version: 1.9.15
[2017-08-30 11:19:54] PHP     Version: 7.1.8
[2017-08-30 11:19:54] Application ENV: production
[2017-08-30 11:19:54] Worker   Number: 4
[2017-08-30 11:19:54] Task     Number: 8
[2017-08-30 11:19:54] Listen     Addr: 0.0.0.0
[2017-08-30 11:19:54] Listen     Port: 8000
[2017-08-30 11:19:54] Config  Manager: Enabled
[2017-08-30 11:19:54] Inotify  Reload: Enabled
```

### 监控应用运行日志

```bash
$tail -f /home/worker/data/www/runtime/demo/*.log
2017/08/30 10:09:21 [notice] [demo] [logid:59a61e51c3474d74175f647f] [0(ms)] [1(MB)] [/Bench/RedisPoolSet] [controller=Bench method=actionRedisPoolSet verb=GET status=200] profile[] counting[]
2017/08/30 10:09:22 [notice] [demo] [logid:59a61e52c3474d74175f6480] [0(ms)] [1(MB)] [/Bench/RedisPoolSet] [controller=Bench method=actionRedisPoolSet verb=GET status=200] profile[] counting[]
2017/08/30 10:09:23 [notice] [demo] [logid:59a61e53c3474d74175f6481] [0(ms)] [1(MB)] [/Bench/RedisPoolSet] [controller=Bench method=actionRedisPoolSet verb=GET status=200] profile[] counting[]
2017/08/30 10:09:49 [notice] [demo] [logid:59a61e6dc3474d74175f6482] [0(ms)] [1(MB)] [/Monitor] [controller=Monitor method=actionIndex verb=GET status=200] profile[] counting[]
2017/08/30 10:39:50 [notice] [demo] [logid:59a62576c3474d746001a631] [42(ms)] [1(MB)] [/Bench/HttpCallBack] [controller=Bench method=actionHttpCallBack verb=GET] profile[] counting[]
2017/08/30 10:39:52 [notice] [demo] [logid:59a62578c3474d746001a632] [3(ms)] [1(MB)] [/Bench/HttpCallBack] [controller=Bench method=actionHttpCallBack verb=GET] profile[] counting[]
2017/08/30 10:40:00 [notice] [demo] [logid:59a62580c3474d746001a633] [44(ms)] [1(MB)] [/Bench/HttpCoroutine] [controller=Bench method=actionHttpCoroutine verb=GET] profile[297#dns-127.0.0.1=0.4(ms)/1,955#api-http://127.0.0.1:80/=1.5(ms)/1] counting[]
2017/08/30 10:40:01 [notice] [demo] [logid:59a62581c3474d746001a634] [4(ms)] [1(MB)] [/Bench/HttpCoroutine] [controller=Bench method=actionHttpCoroutine verb=GET] profile[726#dns-127.0.0.1=0.2(ms)/1,587#api-http://127.0.0.1:80/=3.9(ms)/1] counting[]
2017/08/30 10:40:02 [notice] [demo] [logid:59a62582c3474d746001a635] [4(ms)] [1(MB)] [/Bench/HttpCoroutine] [controller=Bench method=actionHttpCoroutine verb=GET] profile[332#dns-127.0.0.1=0.1(ms)/1,584#api-http://127.0.0.1:80/=3.3(ms)/1] counting[]
2017/08/30 10:40:02 [notice] [demo] [logid:59a62582c3474d746001a636] [3(ms)] [1(MB)] [/Bench/HttpCoroutine] [controller=Bench method=actionHttpCoroutine verb=GET] profile[882#dns-127.0.0.1=0.1(ms)/1,493#api-http://127.0.0.1:80/=3.0(ms)/1] counting[]
```

快捷指令

* logr 

监控运行日志

* logp

监控PHP日志

* logn

监控nginx日志

# links
  * [目录](<preface-目录.md>)
  * 上一节: [软件安装](<03.1-环境变量.md>)
  * 下一节: [supervisor](<03.3-docker.md>)